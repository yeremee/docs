---
layout: page
permalink: /version-numerator/
title: //Blogging Like a Hacker////
---

# Автоматический нумератор версий


## Что делает

Выполняет последовательную нумерацию версий сборок при каждом построении проекта в зависимости от конфигурации.


## Принцип нумерации

Номер версии имеет вид `A.B.C.D`, где `A` – номер *major* версии (старший), `B` – номер *minor* (младший), `C` – *build* (сборка), а `D` – *revision* (пересмотр).

По структуре этот номер состоит из двух независимых частей: `A.B` и `C.D`. В каждой части последующий номер зависит от предыдущего, то есть увеличение номера `A` влечёт обнуление номера `B`, а увеличение `C` — обнуление `D`.

Номер *build* версии `C` увеличивается при каждой сборке проекта, и не зависит от других номеров. Он последовательно растёт с каждым построением независимо от `A.B`, и таким образом обеспечивает сквозную нумерацию.


## Как пользоваться

1. Задать атрибуты сборки

1. Поместите программу в одну из папок, указанных в переменной среды Path, например в `%USERPROFILE%\.dotnet\tools`.

1. Откройте свойства проекта, перейдите в раздел **_События сборки_**, и добавьте следующую строку в поле **_Командная строка события после сборки_**:
   ```
   VersionNumerator.exe $(ProjectPath) $(ConfigurationName)
   ```

1. ~~~~

1. Выполняйте сборку проекта в конфигурации **Debug** до тех пор, пока не будет достигнут нужный функционал.

   После каждой сборки в конфигурации **Debug** увеличивается номер *build* версии и обнуляется номер *revision*: `A.B.C⁺¹.D⁼⁰`

1. Как только функционал достигнут, выполните сборку проекта в конфигурации **Release** или опубликуйте проект.

   После каждой сборки в конфигурации **Release** увеличиваются номера *build* и *minor* версии и обнуляется номер *revision*: `A.B⁺¹.C⁺¹.D⁼⁰`

1. При внесении новых изменений в проект, опять собирайте его в конфигурации **Debug** до достижения нужного качества, а затем — в конфигурации **Release**.

   Если после внесения значительных изменений нужно увеличить номер *major* версии, то это необходимо делать вручную, одновременно обнуляя номер *minor*: `A⁺¹.B⁼⁰.C.D`

В настоящее время использование номера *revision* версии не предусмотрено: он всегда обнуляется.
